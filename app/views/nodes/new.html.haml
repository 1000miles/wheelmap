#map_wrapper
  #minimap.create-node
  = link_to t('.link.large_map'), root_path, :onclick => "location=permalink('#{root_path}');return false;", :class => 'hide', :id => 'show-on-large-map'

#accessibility
  = semantic_form_for @node, :as => :node, :url => {:controller => 'nodes', :action => 'create'} do |form|
    = hidden_field_tag "zoom", params[:zoom]
    = render :partial => 'inputs', :object => @node, :locals => {:form => form}

    = form.buttons do
      = form.commit_button t('formtastic.labels.create')
      %p.hint= t('devise.mandatory')

- content_for :head do
  %title= t('.header.title')

- content_for :javascript_constants do
  :javascript
    var lat  = #{escape_once(params[:lat]  || GeoCache.latlon(request.remote_addr).first )};
    var lon  = #{escape_once(params[:lon]  || GeoCache.latlon(request.remote_addr).last )};
    var zoom = #{escape_once(params[:zoom] || 18)};
    var language = '#{I18n.locale}';

- content_for :javascript do
  :javascript
    drawmap(defaultControls('minimap'), 'minimap');
    jumpTo(lon, lat, zoom);
    createClickableLayer(placesStyle(), #{@node.lon.present? ? escape_once(@node.lon) : 'null' }, #{@node.lat.present? ? escape_once(@node.lat) : 'null' });


